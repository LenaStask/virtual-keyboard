(()=>{"use strict";const e={KeyA:{en:{key:"a",shiftKey:"A"},ru:{key:"ф",shiftKey:"Ф"}},CapsLock:{en:{key:"Caps Lock",shiftKey:"Caps Lock"},ru:{key:"Caps Lock",shiftKey:"Caps Lock"}},IntlBackslash:{en:{key:"§",shiftKey:"±"},ru:{key:">",shiftKey:"<"}},Digit1:{en:{key:"1",shiftKey:"!"},ru:{key:"1",shiftKey:"!"}},Digit2:{en:{key:"2",shiftKey:"@"},ru:{key:"2",shiftKey:'"'}},Digit3:{en:{key:"3",shiftKey:"#"},ru:{key:"3",shiftKey:"№"}},Digit4:{en:{key:"4",shiftKey:"$"},ru:{key:"4",shiftKey:"%"}},Digit5:{en:{key:"5",shiftKey:"%"},ru:{key:"5",shiftKey:":"}},Digit6:{en:{key:"6",shiftKey:"^"},ru:{key:"6",shiftKey:","}},Digit7:{en:{key:"7",shiftKey:"&"},ru:{key:"7",shiftKey:"."}},Digit8:{en:{key:"8",shiftKey:"*"},ru:{key:"8",shiftKey:";"}},Digit9:{en:{key:"9",shiftKey:"("},ru:{key:"9",shiftKey:"("}},Digit0:{en:{key:"0",shiftKey:")"},ru:{key:"0",shiftKey:")"}},NumpadSubtract:{en:{key:"-",shiftKey:"_"},ru:{key:"-",shiftKey:"_"}},Equal:{en:{key:"=",shiftKey:"+"},ru:{key:"=",shiftKey:"+"}},Backspace:{en:{key:"Backspace",shiftKey:"Backspace"},ru:{key:"Backspace",shiftKey:"Backspace"}},Tab:{en:{key:"Tab",shiftKey:"Tab"},ru:{key:"Tab",shiftKey:"Tab"}},KeyQ:{en:{key:"q",shiftKey:"Q"},ru:{key:"й",shiftKey:"Й"}},KeyW:{en:{key:"w",shiftKey:"W"},ru:{key:"ц",shiftKey:"Ц"}},KeyE:{en:{key:"e",shiftKey:"E"},ru:{key:"у",shiftKey:"У"}},KeyR:{en:{key:"r",shiftKey:"R"},ru:{key:"к",shiftKey:"К"}},KeyT:{en:{key:"t",shiftKey:"T"},ru:{key:"е",shiftKey:"Е"}},KeyY:{en:{key:"y",shiftKey:"Y"},ru:{key:"н",shiftKey:"Н"}},KeyU:{en:{key:"u",shiftKey:"U"},ru:{key:"г",shiftKey:"Г"}},KeyI:{en:{key:"i",shiftKey:"I"},ru:{key:"ш",shiftKey:"Ш"}},KeyO:{en:{key:"o",shiftKey:"O"},ru:{key:"щ",shiftKey:"Щ"}},KeyP:{en:{key:"p",shiftKey:"P"},ru:{key:"з",shiftKey:"З"}},BracketLeft:{en:{key:"[",shiftKey:"{"},ru:{key:"х",shiftKey:"Х"}},BracketRight:{en:{key:"]",shiftKey:"}"},ru:{key:"ъ",shiftKey:"Ъ"}},ShiftLeft:{en:{key:"Shift",shiftKey:"Shift"},ru:{key:"Shift",shiftKey:"Shift"}},ShiftRight:{en:{key:"Shift",shiftKey:"Shift"},ru:{key:"Shift",shiftKey:"Shift"}},Backquote:{en:{key:"`",shiftKey:"~"},ru:{key:"]",shiftKey:"["}},KeyS:{en:{key:"s",shiftKey:"S"},ru:{key:"ы",shiftKey:"Ы"}},KeyD:{en:{key:"d",shiftKey:"D"},ru:{key:"в",shiftKey:"В"}},KeyF:{en:{key:"f",shiftKey:"F"},ru:{key:"а",shiftKey:"А"}},KeyG:{en:{key:"g",shiftKey:"G"},ru:{key:"п",shiftKey:"П"}},KeyH:{en:{key:"h",shiftKey:"H"},ru:{key:"р",shiftKey:"Р"}},KeyJ:{en:{key:"j",shiftKey:"J"},ru:{key:"о",shiftKey:"О"}},KeyK:{en:{key:"k",shiftKey:"K"},ru:{key:"л",shiftKey:"Л"}},KeyL:{en:{key:"l",shiftKey:"L"},ru:{key:"д",shiftKey:"Д"}},Semicolon:{en:{key:";",shiftKey:":"},ru:{key:"ж",shiftKey:"Ж"}},Quote:{en:{key:"'",shiftKey:'"'},ru:{key:"э",shiftKey:"Э"}},Backslash:{en:{key:"\\",shiftKey:"|"},ru:{key:"ё",shiftKey:"Ё"}},KeyZ:{en:{key:"z",shiftKey:"Z"},ru:{key:"я",shiftKey:"Я"}},KeyX:{en:{key:"x",shiftKey:"X"},ru:{key:"ч",shiftKey:"Ч"}},KeyC:{en:{key:"c",shiftKey:"C"},ru:{key:"с",shiftKey:"С"}},KeyV:{en:{key:"v",shiftKey:"V"},ru:{key:"м",shiftKey:"М"}},KeyB:{en:{key:"b",shiftKey:"B"},ru:{key:"и",shiftKey:"И"}},KeyN:{en:{key:"n",shiftKey:"N"},ru:{key:"т",shiftKey:"Т"}},KeyM:{en:{key:"m",shiftKey:"M"},ru:{key:"ь",shiftKey:"Ь"}},NumpadDecimal:{en:{key:",",shiftKey:"<"},ru:{key:"б",shiftKey:"Б"}},Period:{en:{key:".",shiftKey:">"},ru:{key:"ю",shiftKey:"Ю"}},ControlLeft:{en:{key:"Control",shiftKey:"Control"},ru:{key:"Control",shiftKey:"Control"}},AltLeft:{en:{key:"Alt",shiftKey:"Alt"},ru:{key:"Alt",shiftKey:"Alt"}},MetaLeft:{en:{key:"Command",shiftKey:"Command"},ru:{key:"Command",shiftKey:"Command"}},Space:{en:{key:" ",shiftKey:" "},ru:{key:" ",shiftKey:" "}},MetaRight:{en:{key:"Command",shiftKey:"Command"},ru:{key:"Command",shiftKey:"Command"}},AltRight:{en:{key:"Alt",shiftKey:"Alt"},ru:{key:"Alt",shiftKey:"Alt"}},ArrowLeft:{en:{key:"←",shiftKey:"←"},ru:{key:"←",shiftKey:"←"}},ArrowDown:{en:{key:"↓",shiftKey:"↓"},ru:{key:"↓",shiftKey:"↓"}},ArrowRight:{en:{key:"→",shiftKey:"→"},ru:{key:"→",shiftKey:"→"}},ArrowUp:{en:{key:"↑",shiftKey:"↑"},ru:{key:"↑",shiftKey:"↑"}},Enter:{en:{key:"Enter",shiftKey:"Enter"},ru:{key:"Enter",shiftKey:"Enter"}},Slash:{en:{key:"/",shiftKey:"?"},ru:{key:"/",shiftKey:"?"}}};let t,y,i,s,n,f="en";!function(){const e=document.createElement("div");e.classList.add("container"),i=document.createElement("h1"),i.innerText="RSS Virtual Keyboard",t=document.createElement("textarea"),t.setAttribute("rows",5),t.setAttribute("cols",50),y=document.createElement("div"),y.classList.add("keyboard");const f=document.createElement("footer");s=document.createElement("p"),s.innerHTML="Клавиатура создана в операционной системе MacOS",n=document.createElement("p"),n.innerHTML="Для переключения языка комбинация: левый Shift + Space";const h=document.createElement("a");h.href="https://github.com/LenaStask/virtual-keyboard",h.target="_blank",h.innerText="https://github.com/LenaStask/virtual-keyboard",document.body.appendChild(e),e.appendChild(i),e.appendChild(t),e.appendChild(y),f.appendChild(s),f.appendChild(n),f.appendChild(h),e.appendChild(f)}(),[["IntlBackslash","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","NumpadSubtract","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","NumpadDecimal","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","AltLeft","MetaLeft","Space","MetaRight","ArrowLeft","ArrowDown","ArrowRight","AltRight"]].forEach((t=>{const i=document.createElement("div");i.classList.add("row"),t.forEach((t=>{i.appendChild(function(t){const y=document.createElement("div");return y.classList.add("key",t),y.dataset.code=t,y.innerText=e[t][f].key,y}(t))})),y.appendChild(i)}));let h=!1,a=!1,K=null;function r(){Object.entries(e).forEach((([e,t])=>{if(["Backspace","Tab","CapsLock","Enter","ShiftLeft","ShiftRight","ControlLeft","AltLeft","MetaLeft","MetaRight","AltRight"].includes(e))return;const i=y.querySelector(`[data-code="${e}"]`);let s=t[f][a?"shiftKey":"key"];h&&(s=a?s.toLowerCase():s.toUpperCase()),i.innerText=s}))}function k(e){a!==e&&(a=e,r())}function o(e){return e instanceof MouseEvent?"mousedown"===e.type?e.target.closest(".key"):K:y.querySelector(`[data-code="${e.code}"]`)}function u(y){y.preventDefault();const i=o(y);if(!i)return;t.focus(),y instanceof MouseEvent&&(K=i),i.classList.add("active");const{code:s}=i.dataset;if("ShiftLeft"===s||"ShiftRight"===s)k(!0);else if("CapsLock"===s)y instanceof KeyboardEvent&&i.classList.remove("active"),i.classList.toggle("pressed"),h=!h,r();else if("Space"===s&&a)f="en"===f?"ru":"en",r();else if("Backspace"===s)!function(){const e=t.value.split("");e.pop(),t.value=e.join("")}();else if("Tab"===s)t.value+="\t";else if("Enter"===s)t.value+="\n";else if("CapsLock"!==s&&"MetaLeft"!==s&&"AltLeft"!==s&&"ControlLeft"!==s&&"MetaRight"!==s&&"AltRight"!==s){let y=e[s][f][a?"shiftKey":"key"];h&&(y=a?y.toLowerCase():y.toUpperCase()),t.value+=y}}function c(e){e.preventDefault();const t=o(e);if(!t)return;const{code:y}=t.dataset;"ShiftLeft"===y||"ShiftRight"===y?k(!1):"CapsLock"===y&&e instanceof KeyboardEvent&&(t.classList.remove("pressed"),h=e.getModifierState("CapsLock"),r()),t.classList.remove("active"),e instanceof MouseEvent&&(K=null)}window.addEventListener("beforeunload",(function(){localStorage.setItem("language",f)})),window.addEventListener("load",(function(){localStorage.getItem("language")&&(f=localStorage.getItem("language"),r())})),y.addEventListener("mousedown",u),window.addEventListener("mouseup",c),window.addEventListener("keydown",u),window.addEventListener("keyup",c),t.focus()})();
